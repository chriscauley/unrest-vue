var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,o,s)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;import{createPopper as a}from"@popperjs/core";import{openBlock as r,createBlock as n,renderSlot as c,resolveComponent as i,createVNode as d,toDisplayString as p,withCtx as u,Fragment as m,renderList as f,resolveDynamicComponent as h,mergeProps as v,createCommentVNode as g,createTextVNode as y,reactive as k}from"vue";const b={props:{target:Object,placement:String,offset:[Array,String]},data:()=>({popper:null}),watch:{target:"reset"},mounted(){this.reset()},unmount(){this.popper.destroy()},methods:{reset(){var t;null==(t=this.popper)||t.destroy();const e=[],o="string"==typeof this.offset?this.offset.split(",").map(Number):this.offset;o&&e.push({name:"offset",options:{offset:o}});const{placement:s="bottom-start",target:l=this.$el.parentElement}=this;this.popper=a(l,this.$el,{placement:s,modifiers:e})}}},w={class:"ur-popper"};b.render=function(t,e,o,s,l,a){return r(),n("div",w,[c(t.$slots,"default")])};var x={data:()=>({focused:!1}),methods:{onFocus(){},onBlur(){},toggleFocus(t){t.__dropdown_touched!==this&&(t.__dropdown_touched=t.__dropdown_touched||this,this.focused?(document.removeEventListener("click",this.toggleFocus),this.onFocus()):t.shiftKey||t.ctrlKey||(document.addEventListener("click",this.toggleFocus),this.onBlur()),this.focused=!this.focused)}}};const C=t=>{"string"==typeof t&&(t={text:t,to:t});const e=t.attrs=t.attrs||{};return e.class=e.class||[],Array.isArray(e.class)||(e.class=[e.class]),t.class&&e.class.push(t.class),t.tagName=t.tagName||"div",t.to&&(e.to=t.to,t.tagName="router-link"),t.href&&(e.href=t.href,t.tagName="a"),t.click&&(e.onclick=t.click,e.class.push("cursor-pointer")),t.key=t.key||t.text||t.icon,t},_={components:{UrPopper:b},mixins:[x],props:{items:Array,placement:String,title:String},computed:{preppedItems(){return this.items.map(C)}}},$={class:"ur-dropdown__trigger"},A={key:0,class:"dropdown-items"};_.render=function(t,e,o,s,l,a){const k=i("ur-popper");return r(),n("div",{onClick:e[1]||(e[1]=(...e)=>t.toggleFocus&&t.toggleFocus(...e)),class:"ur-dropdown"},[c(t.$slots,"default",{},(()=>[d("div",$,p(o.title),1)])),t.focused?(r(),n(k,{key:0,class:"popdown",placement:o.placement},{default:u((()=>[c(t.$slots,"content",{},(()=>{var t;return[(null==(t=o.items)?void 0:t.length)?(r(),n("div",A,[(r(!0),n(m,null,f(a.preppedItems,(t=>(r(),n(h(t.tagName),v({class:"dropdown-item"},t.attrs,{key:t.key}),{default:u((()=>[t.icon?(r(),n("i",{key:0,class:`fa fa-${t.icon}`},null,2)):g("",!0),y(" "+p(t.text),1)])),_:2},1040)))),128))])):g("",!0)]}))])),_:3},8,["placement"])):g("",!0)])};const E={props:{close:Function,title:String}},O={class:"modal"},N={class:"modal-content"},j={key:0,class:"modal-header"},F={key:0,class:"modal-title"},S={class:"modal-body"},U={class:"modal-footer"};E.render=function(t,e,o,s,l,a){return r(),n("div",O,[d("div",{class:"modal-mask",onClick:e[1]||(e[1]=(...t)=>o.close&&o.close(...t))}),d("div",N,[o.title?(r(),n("div",j,[o.title?(r(),n("div",F,p(o.title),1)):g("",!0)])):g("",!0),d("div",S,[c(t.$slots,"default")]),d("div",U,[c(t.$slots,"actions",{},(()=>[d("button",{class:"btn -secondary",onClick:e[2]||(e[2]=(...t)=>o.close&&o.close(...t))},"Close")]))])])])};const P=["success","error","info","warn","todo"],L=k({toasts:[],alert:null,confirm:null}),T=({id:t})=>{L.toasts[t]&&(L.toasts[t].hidden=!0)},I=({text:t,level:e,delay:o=1e4})=>{const s=L.toasts.length;L.toasts.push({id:s,text:t,level:e}),o&&setTimeout((()=>T({id:s})),o)},M=t=>I({text:t,level:"info"});M.add=I,M.hide=T,M.LEVELS=P,P.forEach((t=>M[t]=e=>I({level:t,text:e})));var B={toast:M,alert:t=>L.alert=t,confirm:t=>L.confirm=t,state:L};const D=()=>{},K={computed:{toasts:()=>B.state.toasts.filter((t=>!t.hidden)),alert:()=>(t=>{if(t)return"string"==typeof t&&(t={text:t}),t.tagName=t.tagName||"div",t})(B.state.alert),confirm:()=>{B.state.confirm},actions(){const t=this.alert.actions||[{click:this.closeAlert,text:"Ok"}];return t.forEach((t=>t.class=t.class||"btn btn-primary")),t}},methods:{closeAlert(t){const{confirm:e=D,abort:o=D}=this.alert;(t?e:o)(),B.state.alert=null},hideToast:B.toast.hide}},V={class:"toast-list"},q={class:"text"},Z={key:0,class:"modal"},z={key:0,class:"modal-title"},G={class:"modal-body max-w-md w-11/12"},H={key:1,class:"modal-footer"};K.render=function(t,e,o,s,l,a){return r(),n(m,null,[d("div",V,[(r(!0),n(m,null,f(a.toasts,(t=>(r(),n("div",{key:t.id,class:`toast -${t.level}`},[d("div",q,p(t.text),1),d("i",{class:"fa fa-close",onClick:e=>a.hideToast(t)},null,8,["onClick"])],2)))),128))]),a.alert?(r(),n("div",Z,[d("div",{class:"modal-mask",onClick:e[1]||(e[1]=(...t)=>a.closeAlert&&a.closeAlert(...t))}),(r(),n(h(a.alert.tagName),{class:"modal-content",onClose:a.closeAlert},{default:u((()=>[a.alert.title?(r(),n("h2",z,[a.alert.icon?(r(),n("i",{key:0,class:`fa fa-${a.alert.icon}`},null,2)):g("",!0),y(" "+p(a.alert.title),1)])):g("",!0),d("div",G,[a.alert.icon&&!a.alert.title?(r(),n("i",{key:0,class:`fa fa-${a.alert.icon}`},null,2)):g("",!0),y(" "+p(a.alert.text),1)]),a.actions.length?(r(),n("div",H,[(r(!0),n(m,null,f(a.actions,((t,e)=>(r(),n("button",{key:e,class:t.class,onClick:t.click},p(t.text),11,["onClick"])))),128))])):g("",!0)])),_:1},8,["onClose"]))])):g("",!0)],64)},B.Component=K;var J=((t,a)=>{for(var r in a||(a={}))o.call(a,r)&&l(t,r,a[r]);if(e)for(var r of e(a))s.call(a,r)&&l(t,r,a[r]);return t})({install(t){t.config.globalProperties.$ui=B,t.component("UnrestUi",K)}},B);const Q="data-vue-router-controlled";var R={UrPopper:b,UrDropdown:_,FocusMixin:x,ui:J,applyMeta:(t,e,o)=>{const s=t.matched.slice().reverse().find((t=>{var e;return null==(e=t.meta)?void 0:e.title}));s&&(document.title=s.meta.title);const l=t.matched.slice().reverse().find((t=>{var e;return null==(e=t.meta)?void 0:e.metaTags}));Array.from(document.querySelectorAll(`[${Q}]`)).forEach((t=>t.parentNode.removeChild(t))),null==l||l.meta.tags.forEach((t=>{const e=document.createElement("meta");Object.keys(t).forEach((o=>e.setAttribute(o,t[o]))),e.setAttribute(Q,""),document.head.appendChild(e)})),o()},loadViews:t=>Object.entries(t).map((([t,e])=>{const o={name:t.toLowerCase(),path:`/${t.toLowerCase()}`,component:e,meta:{}};return Object.assign(o,e.__route),o.meta.title||(o.meta.title=t.replace(/[A-Z]/g,(t=>` ${t}`))),o})),plugin:{install(t){t.component("UrPopper",b),t.component("UrDropdown",_),t.component("UrModal",E)}}};export default R;
